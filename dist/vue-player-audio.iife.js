var vuePlayerAudio=function(){"use strict";function e(e,t,n,o,i,s,r,a,d,u){"boolean"!=typeof r&&(d=a,a=r,r=!1);const c="function"==typeof n?n.options:n;let l;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),o&&(c._scopeId=o),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):t&&(l=r?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),l)if(c.functional){const e=c.render;c.render=function(t,n){return l.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,l):[l]}return n}const t={props:{audioSrc:{type:String,required:!0},startSecond:{type:Number,default:0},endSecond:{type:Number,default:0},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},loopGapMillisecond:{type:Number,default:50},controls:{type:Boolean,default:!1},preload:{type:String,default:"metadata"}},data:function(){return{isPlaying:!1,currentSecond:this.startSecond,maxSecond:0,allowSetCurrentTime:!0,setTimeoutId1:0,setTimeoutId2:0,setTimeoutId3:0}},watch:{audioSrc:function(){this.beginPlay()},startSecond:function(){this.beginPlay()}},mounted:function(){this.beginPlay()},beforeDestroy:function(){clearTimeout(this.setTimeoutId1),clearTimeout(this.setTimeoutId2),clearTimeout(this.setTimeoutId3)},methods:{beginPlay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioSrc;e&&(this.$refs.audioDom.currentTime=Math.max(this.startSecond,1e-6),this.autoplay&&this.$refs.audioDom.play())},loopPlayOrEndPause:function(){var e=this;this.loop?(this.$refs.audioDom.currentTime=this.startSecond,this.setTimeoutId2=setTimeout((function(){try{e.$refs.audioDom.play()}catch(e){}}),this.loopGapMillisecond)):(this.$refs.audioDom.pause(),this.$refs.audioDom.currentTime=this.startSecond)},setIsPlaying:function(){var e=this;clearTimeout(this.setTimeoutId1),this.setTimeoutId1=setTimeout((function(){try{e.isPlaying=!e.$refs.audioDom.paused}catch(e){}}),this.loopGapMillisecond+20)},timeupdateHandler:function(){var e=this;try{this.maxSecond=this.$refs.audioDom.duration,this.currentSecond=this.$refs.audioDom.currentTime,this.currentSecond<this.startSecond?this.allowSetCurrentTime&&(this.$refs.audioDom.currentTime=this.startSecond,this.allowSetCurrentTime=!1,this.setTimeoutId3=setTimeout((function(){e.allowSetCurrentTime=!0}),1e3)):((0!==this.endSecond&&this.currentSecond>=this.endSecond||0!==this.maxSecond&&this.currentSecond>=this.maxSecond)&&this.loopPlayOrEndPause(),this.setIsPlaying())}catch(e){}},endedHandler:function(){try{this.loopPlayOrEndPause()}catch(e){}},pauseHandler:function(){this.setIsPlaying()}}};var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("audio",{ref:"audioDom",attrs:{src:e.audioSrc,controls:e.controls,preload:e.preload},on:{timeupdate:e.timeupdateHandler,ended:e.endedHandler,pause:e.pauseHandler}}),e._v(" "),e._t("default",[n("br"),e._v("\n    正在播放："+e._s(e.isPlaying)+"\n    "),n("br"),e._v("\n    当前时间："+e._s(e.currentSecond)+"\n    "),n("br"),e._v("\n    最大时间："+e._s(e.maxSecond)+"\n    "),n("br")],{isPlaying:e.isPlaying,currentSecond:e.currentSecond,maxSecond:e.maxSecond})],2)};n._withStripped=!0;const o=e({render:n,staticRenderFns:[]},void 0,t,void 0,!1,void 0,!1,void 0,void 0,void 0);return o.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.component||"vue-player-audio",o)},o}();
